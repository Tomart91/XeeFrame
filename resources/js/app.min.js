
var app={request:function(a,b,e,h,d,f){var c=new Progress();c.show();var g=function(j,n,l){try{c.hide();h(j);var k='<div class="col-xs-12 well">'+a+" "+l.status+" "+l.statusText+"</div>";$("#ajax").append(k)}catch(m){if(typeof d=="function"){d(j)}}};if(f){$.pjax({url:a,type:"POST",data:b,container:$("#pjaxContainer"),success:g})}else{var i={url:a,type:e,data:b,success:g};if(b instanceof FormData){i.processData=false;i.contentType=false}$.ajax(i)}},pjax:function(b,d,c,e,a){app.request(b,d,c,e,a,true)},ajax:function(b,d,c,e,a){app.request(b,d,c,e,a,false)},getParams:function(a){return $("#"+a).val()},autoLoad:function(){var module=app.getParams("module");module=module.replace("\\","_");var action=app.getParams("action");var nameClass=module+"_"+action;var myObject=eval("new "+nameClass+"()");myObject.register()},showModalByAjax:function(a,b,c){$("body").append('<div class="globalModal"></div>');app.ajax(a,{},"POST",function(e){var f=$(".globalModal");f.html(e);var d=f.find(".modal");d.on("shown.bs.modal",function(g){var h=$("form");h.submit(function(i){i.preventDefault();var j=new FormData($(this)[0]);app.ajax(h.attr("action"),j,"POST",function(k){d.modal("hide");c(k)})});b(g)});d.on("hidden.bs.modal",function(){f.remove()});d.modal("show")})}};jQuery(document).ready(function(){app.autoLoad()});